/* Page setup (WeasyPrint uses this; wkhtmltopdf uses CLI for size/margins,
   but it won't be harmed by seeing this) */
@page {
  size: A4;
  margin: 25mm;
}

/* Print-style section spacing + page breaks for headings.
   Only H1 (chapter level) starts a new page; H2 does not. */
h1 {
  margin-top: 4em;
  margin-bottom: 2em;
  page-break-before: always;
  string-set: chapter-title content(); /* CSS Paged Media / WeasyPrint running header */
}

h2 {
  margin-top: 3em;
  margin-bottom: 1.5em;
}

/* A4-specific height cap for the cover image:
   297mm page height - 2 Ã— 25mm margins = 247mm */
.cover-page .cover-image {
/*  max-height: 247mm; */
}

/* Capture the book title for the left-page running header (WeasyPrint).
   The .half-title h1 is the first heading and always holds the book title. */
.half-title h1 {
  string-set: book-title content();
}

/* Running page headers: book title left-justified on left-hand (verso) pages,
   chapter title right-justified on right-hand (recto) pages.
   Page numbers centred in the footer.
   These @page content rules are honoured by WeasyPrint; wkhtmltopdf uses
   --header-left / --header-right / --footer-center CLI args instead. */
@page :left {
  @top-left {
    content: string(book-title);
    font-size: 9pt;
    font-style: italic;
  }
  @bottom-center {
    content: counter(page);
    font-size: 9pt;
  }
}

@page :right {
  @top-right {
    content: string(chapter-title, start);
    font-size: 9pt;
    font-style: italic;
  }
  @bottom-center {
    content: counter(page);
    font-size: 9pt;
  }
}

/* Suppress running headers/footers on front-matter pages (WeasyPrint named pages).
   wkhtmltopdf does not support named pages; front-matter suppression is not
   available there without a custom --header-html approach. */
.cover-page,
.half-title,
.title-page,
.copyright-page {
  page: front-matter;
}

@page front-matter {
  @top-left    { content: none; }
  @top-right   { content: none; }
  @bottom-center { content: none; }
}

/* Don't force extra page breaks for headings in the front matter */
.cover-page h1,
.cover-page h2,
.half-title h1,
.half-title h2,
.title-page h1,
.title-page h2,
.copyright-page h1,
.copyright-page h2,
#toc h1,
#toc h2 {
  page-break-before: auto;
  margin-top: 0;   /* optional: avoid big vertical gaps */
}

/* Table of contents: remove hyperlink styling so entries look like print.
   Page numbers are appended using CSS target-counter() (WeasyPrint only).
   wkhtmltopdf does not support target-counter(); links are styled as plain
   text only under that renderer. */
#TOC a {
  color: inherit;
  text-decoration: none;
}

#TOC a::after {
  content: leader('.') target-counter(attr(href), page);
}

