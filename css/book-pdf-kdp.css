/* KDP / BookBub hard-copy PDF
   Trim size: 7" × 9" (17.78 cm × 22.86 cm)
   This is the closest standard Amazon KDP trim size to the target 18 cm × 23 cm.

   @page rules are used by WeasyPrint (and other CSS paged-media renderers).
   wkhtmltopdf ignores them, but respects the --page-width / --page-height /
   --margin-* flags that make_book passes on the command line when --kdp is set. */

@page {
  size: 178mm 229mm; /* 7" × 9" */
  margin-top:    25mm;
  margin-bottom: 25mm;
}

/* Mirrored margins: larger inside (gutter) on each page type */
@page :left {
  margin-left:  20mm; /* outside */
  margin-right: 30mm; /* gutter  */
}

@page :right {
  margin-left:  30mm; /* gutter  */
  margin-right: 20mm; /* outside */
}

/* Print-style section spacing + page breaks for headings */
h1 {
  margin-top: 4em;
  margin-bottom: 2em;
  /* Chapters must start on a recto (odd-numbered, right-hand) page.
     WeasyPrint honours 'recto'; wkhtmltopdf falls back to 'always'. */
  break-before: recto;
  page-break-before: always; /* fallback */
}

h2 {
  margin-top: 3em;
  margin-bottom: 1.5em;
  page-break-before: always;
}

/* 7" × 9" cover image height cap:
   229mm page height − 2 × 25mm margins = 179mm */
.cover-page .cover-image {
  max-height: 179mm;
}

/* Don't force page breaks for headings in the front matter */
.cover-page h1,
.cover-page h2,
.half-title h1,
.half-title h2,
.title-page h1,
.title-page h2,
.copyright-page h1,
.copyright-page h2,
#toc h1,
#toc h2 {
  break-before: auto;
  page-break-before: auto;
  margin-top: 0;
}
