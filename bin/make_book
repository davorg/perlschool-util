#!/usr/bin/env perl
use v5.38;
use warnings;

use Getopt::Long qw(GetOptions);
use FindBin qw($RealBin);
use lib "$RealBin/../lib";
use PerlSchool::App::MakeBook;

# ------------------------------------------------------------
# Config / CLI
# ------------------------------------------------------------

my $metadata_file = 'book-metadata.yml';
my $keep_build    = 0;
my $kdp           = 0;
my $weasyprint    = 0;

GetOptions(
  'metadata=s'    => \$metadata_file,
  'keep-build!'   => \$keep_build,
  'kdp!'          => \$kdp,
  'weasyprint!'   => \$weasyprint,
) or die <<"USAGE";
Usage: make_book [--metadata book-metadata.yml] [--keep-build] [--kdp] [--weasyprint]
USAGE

# ------------------------------------------------------------
# Run the application
# ------------------------------------------------------------

my $app = PerlSchool::App::MakeBook->new(
  metadata_file => $metadata_file,
  keep_build    => $keep_build,
  kdp           => $kdp,
  weasyprint    => $weasyprint,
);

exit $app->run_app();
